var perfninja=function(e){"use strict";var n=function(){return n=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},n.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var r={releaseId:"",endpoint:""},t=function(){return n({},r)},a="perfninja-release-id",i=function(e){try{return void 0!==e?(localStorage.setItem(a,e),!0):localStorage.getItem(a)}catch(e){return!1}},o=i(),c=function(e){return e&&i(e),o},s="undefined"==typeof window?{}:window;((s.perfninja||{}).q||[]).forEach((function(e){var n=e[0],r=e[1];switch(n){case"init":h(r[0]);break;case"mark":m(r[0]);break;case"measure":y(r[0]&&r[0][0],r[0]&&r[0][1])}}));var u=[],f=!1,p=function(){f||(setTimeout((function(){!function(){var e=t().endpoint;if(e){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(u)),u.splice(0,u.length)}}(),f=!1}),500),f=!0)},d=s.performance,l="perfninja_measure",v=function(e){return"perfninja_".concat(e)},m=function(e){d&&e&&d.mark(v(e))},y=function(e,n){if(void 0===n&&(n={}),d){var r=n.noCache,a=void 0!==r&&r,i=n.markName,o=void 0===i?"":i,s="";if(!!d.getEntriesByType("navigation")[0][o])s=o;else d.getEntriesByName(v(o))[0]&&(s=v(o));if((!a||c()!==t().releaseId)&&s)try{var f=d.measure(l,s);d.clearMeasures(l),d.clearMarks(v(o)),u.push({c:e,d:f.duration,e:n.experiment}),p()}catch(e){console&&console.warn&&console.warn(e)}}},h=function(e){if(!e||!e.endpoint)throw new Error("Library couldn't work without the endpoint param");!function(e){var n=Object.keys(e).reduce((function(n,t){return void 0!==r[t]&&(n[t]=e[t]),n}),{});Object.assign(r,n)}(e),c(e.releaseId)};return e.init=h,e.mark=m,e.measure=y,e}({});
